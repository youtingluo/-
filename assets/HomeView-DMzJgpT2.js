import{r as v,c as j,o as ee,w as te,a as n,b as se,d as le,u as C,e as t,f as ne,v as oe,n as p,F as b,g,h as m,i as c,t as y,j as U,k as re,l as ae,m as o,p as ue}from"./index-BAoRV7va.js";import{_ as ie,a as ce,L as de}from"./index-DM1TnAHf.js";const ve=(A,x)=>{const h=A.__vccOpts||A;for(const[M,S]of x)h[M]=S;return h},be={class:"container py-3"},fe={class:"input-group mb-3 search-bar shadow-sm"},pe={class:"border-bottom border-2 mb-4"},ye={class:"mb-4"},ke={class:"d-flex fs-3 mb-3 flex-wrap"},he={key:0,class:"row gx-2 mb-4"},ge={class:"col"},me={class:"d-flex fs-3 flex-wrap"},xe={class:"me-2"},_e=["onClick"],we={key:1,class:"row mb-4"},Ce={class:"col"},$e={class:"d-flex flex-wrap fs-3"},Te={class:"me-2"},Oe=["onClick"],qe={key:0,class:"fs-6 text-black text-opacity-50"},je={class:"h5"},Ae={class:"text-danger"},Me={class:"pb-2"},Se=["onClick"],Ve={key:0,class:"text-center py-5"},Re={class:"row gx-2"},Ee=["onClick"],Ne={class:"p-3 rounded-5 h-100 shadow-sm bg-white"},Ie={class:"d-flex justify-content-between mb-3"},De=["href"],Be={class:"d-flex flex-wrap"},Le={key:0},ze={key:2,class:"row gx-2"},He=["onClick"],Je={class:"p-3 rounded-5 h-100 shadow-sm bg-white"},Ue={class:"d-flex justify-content-between mb-3"},Qe=["href"],We={class:"d-flex flex-wrap"},Ze={key:0},Fe={class:"fs-6 text-black text-opacity-50"},Ge={class:"row gx-2"},Pe=["onClick"],Xe={class:"p-3 rounded-5 h-100 shadow-sm bg-white"},Ye={class:"d-flex justify-content-between mb-3"},Ke=["href"],et={class:"d-flex flex-wrap"},tt={key:0},st={class:"badge rounded-pill text-bg-secondary fw-normal fs-6 me-2 mb-2"},lt={__name:"HomeView",setup(A){const x=ue(),h=re(),M="AIzaSyD5bMMUbcVKn0XhDjWNzZOZ0_YQwQjd2nU",S="1z-irp4iTLpHxl64hk6cGQ-94d4x5cTbZwHlV3eRw8fM",u=v(""),$=v(!1);async function V(r="全部"){$.value=!0,u.value=r;const e=`${r}!A1:AA70`,l=`https://sheets.googleapis.com/v4/spreadsheets/${S}/values/${e}?key=${M}`;try{const s=await ce.get(l);$.value=!1;const a=s.data.values;T.value=a[0].slice(2,-1),w.value=I(a),I(w.value),i.value=h.query.MultipleTypeArray?JSON.parse(h.query.MultipleTypeArray):[],J()}catch(s){$.value=!1,console.error("Error fetching values:",s)}}function I(r){const e=r[0],l=[];for(let s=1;s<r.length;s++){const a={};for(let f=0;f<e.length;f++)a[e[f]]=r[s][f];l.push(a)}return u.value==="全部"&&Q(w.value),l}const D=v([]);function Q(r){const e=r.reduce((s,a)=>{const f=Object.fromEntries(Object.entries(a).filter(([,N])=>N!==void 0||""));return s[a.類別]||(s[a.類別]=[]),s[a.類別].push(f),s},{}),l=[];for(const s in e)l.push({[s]:e[s]});D.value=l}const w=v([]),T=v([]),k=v([]),d=v(!1),W=j(()=>k.value.length?w.value.filter(r=>{const e=i.value.every(s=>r[s]&&r[s].length>0),l=i.value.some(s=>k.value.every(a=>r[s]&&r[s].includes(a)));return e&&l}):w.value.filter(r=>i.value.every(e=>r[e]))),R=v(null),Z=()=>{ae(()=>{if(R.value){const e=document.body.getBoundingClientRect().top,s=R.value.getBoundingClientRect().top-e-110;window.scrollTo({top:s,behavior:"smooth"})}})},B=()=>{window.scrollTo(0,0),L.value=!1,_.value=""},L=v(!1),_=v(""),z=v(null),F=()=>{L.value=!0,z.value.focus()},G=j(()=>{const r=[],e=_.value;return w.value.forEach(s=>{const a=new RegExp(e,"i");T.value.forEach(f=>{if(a.test(s[f])){const N=s[f].split(",").filter(K=>a.test(K));r.push(...N)}})}),Array.from(new Set(r))}),H=j(()=>{const r=v([]);return w.value.filter(e=>{const l=new RegExp(_.value,"i");return T.value.some(a=>{const f=l.test(e[a]);return f&&r.value.push(e[a]),f})})}),i=v([]),P=r=>{const e=i.value.indexOf(r);e>-1?i.value.splice(e,1):i.value.push(r),J()},X=r=>{const e=k.value.indexOf(r);e>-1?k.value.splice(e,1):k.value.push(r)},O=v([]),q=v(!1),J=()=>{const r=[];w.value.forEach(e=>{i.value.forEach(l=>{r.push(e[l])})}),k.value=h.query.selected?JSON.parse(h.query.selected):[],O.value=[...new Set(r.filter(Boolean).join().split(","))]},Y=j(()=>q.value?O.value:O.value.slice(0,8));function E(r){x.push({path:`company/${r}`,query:{selectedindustry:u.value,MultipleTypeArray:JSON.stringify(i.value),selected:JSON.stringify(k.value)}})}return ee(()=>{if(h.query.selectedindustry!=="全部"&&h.query.selectedindustry){V(h.query.selectedindustry);return}V()}),te(()=>u.value,()=>{V(u.value)},{deep:!0}),(r,e)=>(o(),n(b,null,[se(C(de),{active:$.value,"onUpdate:active":e[0]||(e[0]=l=>$.value=l)},{default:le(()=>e[20]||(e[20]=[t("div",{class:"loader"},null,-1)])),_:1},8,["active"]),t("div",be,[t("div",fe,[t("button",{class:"btn btn-light btn-sm rounded-0",type:"button",onClick:B},e[21]||(e[21]=[t("span",{class:"material-symbols-outlined d-inline-block align-middle"}," chevron_backward ",-1)])),ne(t("input",{onInput:Z,ref_key:"input",ref:z,type:"text",class:"form-control border-0",placeholder:"搜尋食材/廠商","onUpdate:modelValue":e[1]||(e[1]=l=>_.value=l)},null,544),[[oe,_.value]]),t("button",{class:"btn btn-dark btn-sm rounded-0",type:"button",onClick:F},e[22]||(e[22]=[t("span",{class:"material-symbols-outlined"}," search ",-1)]))]),t("div",pe,[t("div",ye,[e[23]||(e[23]=t("h3",{class:"fs-6 text-black text-opacity-50"},"廠商行業",-1)),t("ul",ke,[t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:u.value==="全部"}]),onClick:e[2]||(e[2]=()=>{C(x).push({query:{}}),u.value="全部"})}," 全部 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:u.value==="火鍋"}]),onClick:e[3]||(e[3]=()=>{C(x).push({query:{}}),u.value="火鍋"})}," 火鍋 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:u.value==="飲料"}]),onClick:e[4]||(e[4]=()=>{C(x).push({query:{}}),u.value="飲料"})}," 飲料 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:u.value==="剉冰"}]),onClick:e[5]||(e[5]=()=>{C(x).push({query:{}}),u.value="剉冰"})}," 剉冰 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:u.value==="燒烤"}]),onClick:e[6]||(e[6]=()=>{C(x).push({query:{}}),u.value="燒烤"})}," 燒烤 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:u.value==="烘焙"}]),onClick:e[7]||(e[7]=()=>{C(x).push({query:{}}),u.value="烘焙"})}," 烘焙 ",2)])])]),u.value!=="全部"?(o(),n("div",he,[t("div",ge,[e[24]||(e[24]=t("h3",{class:"fs-6 text-black text-opacity-50"},"原物料種類",-1)),t("ul",me,[t("li",xe,[t("a",{href:"#",class:p(["btn btn-custom border-0",{active:!i.value.length}]),onClick:e[8]||(e[8]=()=>{i.value=[],k.value=[]})},"全部",2)]),(o(!0),n(b,null,g(T.value,l=>(o(),n("li",{class:"me-2",key:l},[t("a",{href:"#",class:p(["btn btn-custom border-0",{active:i.value.includes(l)}]),onClick:c(s=>P(l),["prevent"])},y(l),11,_e)]))),128))])])])):m("",!0),i.value.length?(o(),n("div",we,[t("div",Ce,[e[25]||(e[25]=t("h3",{class:"fs-6 text-black text-opacity-50"},"類別細項",-1)),t("ul",$e,[t("li",Te,[t("a",{href:"#",class:p(["btn btn-custom border-0",{active:!k.value.length}]),onClick:e[9]||(e[9]=l=>k.value=[])},"全部",2)]),(o(!0),n(b,null,g(Y.value,l=>(o(),n("li",{key:l},[t("a",{href:"#",class:p(["btn btn-custom border-0",{active:k.value.includes(l)}]),onClick:c(s=>X(l),["prevent"])},y(l),11,Oe)]))),128)),t("li",null,[O.value.length>8?(o(),n("a",{key:0,href:"#",class:"btn text-primary border-0",onClick:e[10]||(e[10]=c(l=>q.value=!q.value,["prevent"]))},y(q.value?"收起－":"更多"),1)):m("",!0)])])])])):m("",!0)]),u.value!=="全部"?(o(),n("h3",qe,"廠商")):m("",!0),_.value.trim()?(o(),n("div",{key:1,ref_key:"scrollbox",ref:R},[t("p",je,[e[27]||(e[27]=U(" 以下為 ")),t("span",Ae,y(_.value),1),e[28]||(e[28]=U(" 的搜尋結果 ")),t("button",{type:"button",class:"btn btn-sm btn-danger fs-6",onClick:c(B,["prevent"])},e[26]||(e[26]=[t("span",{class:"material-symbols-outlined d-inline-block align-middle"}," close ",-1)]))]),t("div",Me,[(o(!0),n(b,null,g(G.value,l=>(o(),n("span",{class:"badge rounded-pill text-bg-primary me-1 mb-1 btn",key:l,onClick:s=>_.value=l},y(l),9,Se))),128))]),H.value.length?m("",!0):(o(),n("div",Ve,e[29]||(e[29]=[t("img",{src:ie,alt:"無資料"},null,-1)]))),t("div",Re,[(o(!0),n(b,null,g(H.value,l=>(o(),n("div",{class:"col-6 col-lg-3 mb-3",key:l.編號},[t("a",{href:"#",onClick:c(s=>E(l.編號),["prevent"])},[t("div",Ne,[t("div",Ie,[t("div",null,[t("a",{href:l.網址,target:"_blank",class:"fs-6",onClick:e[11]||(e[11]=c(()=>{},["stop"]))},y(l.廠商),9,De)]),t("div",null,[d.value?(o(),n("i",{key:0,class:"bi bi-heart-fill fs-4 link-info",onClick:e[12]||(e[12]=c(s=>d.value=!d.value,["prevent"]))})):(o(),n("i",{key:1,class:"bi bi-heart fs-4 link-gray",onClick:e[13]||(e[13]=c(s=>d.value=!d.value,["prevent"]))}))])]),t("div",Be,[(o(!0),n(b,null,g(Object.keys(l),s=>(o(),n(b,{key:s},[l[s]&&s!=="編號"&&s!=="廠商"&&s!=="網址"&&s!=="類別"&&s!=="公司簡介"?(o(),n("div",Le,[t("span",{class:p(["badge rounded-pill text-bg-secondary fw-normal fs-6 me-2 mb-2",[{"bg-warning":i.value.includes(s)},{"text-dark":i.value.includes(s)}]])},y(s),3)])):m("",!0)],64))),128))])])],8,Ee)]))),128))])],512)):u.value!=="全部"?(o(),n("div",ze,[(o(!0),n(b,null,g(W.value,l=>(o(),n("div",{class:"col-6 col-lg-3 mb-3",key:l.編號},[t("a",{href:"#",onClick:c(s=>E(l.編號),["prevent"])},[t("div",Je,[t("div",Ue,[t("div",null,[t("a",{href:l.網址,target:"_blank",class:"fs-6",onClick:e[14]||(e[14]=c(()=>{},["stop"]))},y(l.廠商),9,Qe)]),t("div",null,[d.value?(o(),n("i",{key:0,class:"bi bi-heart-fill fs-4 link-info",onClick:e[15]||(e[15]=c(s=>d.value=!d.value,["prevent"]))})):(o(),n("i",{key:1,class:"bi bi-heart fs-4 link-gray",onClick:e[16]||(e[16]=c(s=>d.value=!d.value,["prevent"]))}))])]),t("div",We,[(o(!0),n(b,null,g(Object.keys(l),s=>(o(),n(b,{key:s},[l[s]&&s!=="編號"&&s!=="廠商"&&s!=="網址"?(o(),n("div",Ze,[t("span",{class:p(["badge rounded-pill text-bg-secondary fw-normal fs-6 me-2 mb-2",[{"bg-warning":i.value.includes(s)},{"text-dark":i.value.includes(s)}]])},y(s),3)])):m("",!0)],64))),128))])])],8,He)]))),128))])):m("",!0),u.value==="全部"&&!_.value?(o(!0),n(b,{key:3},g(D.value,l=>(o(),n("div",{class:"mb-4",key:l.編號},[t("h3",Fe,y(Object.keys(l).toString()),1),t("div",Ge,[(o(!0),n(b,null,g(l[Object.keys(l)],s=>(o(),n("div",{class:"col-6 col-lg-3 mb-3",key:s.編號},[t("a",{href:"#",onClick:c(a=>E(s.編號),["prevent"])},[t("div",Xe,[t("div",Ye,[t("div",null,[t("a",{href:s.網址,target:"_blank",class:"fs-6",onClick:e[17]||(e[17]=c(()=>{},["stop"]))},y(s.廠商),9,Ke)]),t("div",null,[d.value?(o(),n("i",{key:0,class:"bi bi-heart-fill fs-4 link-info",onClick:e[18]||(e[18]=c(a=>d.value=!d.value,["prevent"]))})):(o(),n("i",{key:1,class:"bi bi-heart fs-4 link-gray",onClick:e[19]||(e[19]=c(a=>d.value=!d.value,["prevent"]))}))])]),t("div",et,[(o(!0),n(b,null,g(Object.keys(s),a=>(o(),n(b,{key:a},[s[a]&&!["編號","廠商","網址","類別","公司簡介"].includes(a)?(o(),n("div",tt,[t("span",st,y(a),1)])):m("",!0)],64))),128))])])],8,Pe)]))),128))])]))),128)):m("",!0)])],64))}},rt=ve(lt,[["__scopeId","data-v-844ea566"]]);export{rt as default};
