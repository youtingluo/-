import{u as ee,a as te,r as c,c as S,o as se,b as le,d as n,e as o,f as M,w as V,g as w,h as t,i as ne,v as oe,j as y,n as f,F as b,k as m,l as k,t as h,m as J,p as F}from"./index-Cy3yoq0x.js";import{_ as ae,a as re,L as ie,b as ue}from"./index-BXqWgN5B.js";const de={class:"navbar bg-white shadow-sm mb-4 sticky-top"},ce={class:"container"},ve={key:0,class:"d-flex w-100"},be={key:1,class:"input-group"},fe={class:"container"},pe={class:"border-bottom border-2 mb-4"},ye={class:"mb-4"},ke={class:"d-flex fs-3 mb-3 flex-wrap"},he={key:0,class:"row gx-2 mb-4"},ge={class:"col"},me={class:"d-flex fs-3 flex-wrap"},xe={class:"me-2"},_e=["onClick"],we={key:1,class:"row mb-4"},Ce={class:"col"},Te={class:"d-flex flex-wrap fs-3"},$e={class:"me-2"},Oe=["onClick"],je={key:0,class:"fs-6 text-black text-opacity-50"},qe={class:"text-danger"},Ae={key:0,class:"text-center py-5"},Re={class:"p-3 rounded-5 h-100 shadow-sm bg-white"},Se={class:"d-flex justify-content-between mb-3"},Me=["href"],Ve={class:"d-flex flex-wrap"},Le={key:0},Be={key:2,class:"row gx-2"},Ie=["onClick"],Ne={class:"p-3 rounded-5 h-100 shadow-sm bg-white"},De={class:"d-flex justify-content-between mb-3"},Ee=["href"],ze={class:"d-flex flex-wrap"},Je={key:0},Fe={class:"fs-6 text-black text-opacity-50"},He={class:"row gx-2"},Ge=["onClick"],Qe={class:"p-3 rounded-5 h-100 shadow-sm bg-white"},Ue={class:"d-flex justify-content-between mb-3"},We=["href"],Ze={class:"d-flex flex-wrap"},Pe={key:0},Xe={class:"badge rounded-pill text-bg-secondary fw-normal fs-6 me-2 mb-2"},tt={__name:"HomeView",setup(Ye){const C=ee(),x=te(),H="AIzaSyBD47B-9Q5OFIvDYEZXmv7WrcVb-7eoT_A",G="1z-irp4iTLpHxl64hk6cGQ-94d4x5cTbZwHlV3eRw8fM",v=c(""),$=c(!1);async function _(a="全部"){$.value=!0,v.value=a;const e=`${a}!A1:AA70`,r=`https://sheets.googleapis.com/v4/spreadsheets/${G}/values/${e}?key=${H}`;try{const s=await re.get(r);$.value=!1;const l=s.data.values;q.value=l[0].slice(2,-1),T.value=L(l),L(T.value),i.value=x.query.MultipleTypeArray?JSON.parse(x.query.MultipleTypeArray):[],E()}catch(s){$.value=!1,console.error("Error fetching values:",s)}}function L(a){const e=a[0],r=[];for(let s=1;s<a.length;s++){const l={};for(let d=0;d<e.length;d++)l[e[d]]=a[s][d];r.push(l)}return v.value==="全部"&&Q(T.value),r}const B=c([]);function Q(a){const e=a.reduce((s,l)=>{const d=Object.fromEntries(Object.entries(l).filter(([,K])=>K!==void 0||""));return s[l.類別]||(s[l.類別]=[]),s[l.類別].push(d),s},{}),r=[];for(const s in e)r.push({[s]:e[s]});B.value=r}const T=c([]),q=c([]),p=c([]),u=c(!1),U=S(()=>p.value.length?T.value.filter(a=>{const e=i.value.every(s=>a[s]&&a[s].length>0),r=i.value.some(s=>p.value.every(l=>a[s]&&a[s].includes(l)));return e&&r}):T.value.filter(a=>i.value.every(e=>a[e]))),A=c(null),W=()=>{F(()=>{if(A.value){const e=document.body.getBoundingClientRect().top,s=A.value.getBoundingClientRect().top-e-82;window.scrollTo({top:s,behavior:"smooth"})}})},I=()=>{window.scrollTo(0,0),R.value=!1,g.value=""},R=c(!1),g=c(""),N=c(null),Z=()=>{R.value=!0,F(()=>{N.value.focus()})},D=S(()=>T.value.filter(a=>{const e=new RegExp(g.value.split("").join(".*"),"i");return q.value.some(r=>e.test(a[r]))})),i=c([]),P=a=>{const e=i.value.indexOf(a);e>-1?i.value.splice(e,1):i.value.push(a),E()},X=a=>{const e=p.value.indexOf(a);e>-1?p.value.splice(e,1):p.value.push(a)},O=c([]),j=c(!1),E=()=>{const a=[];T.value.forEach(e=>{i.value.forEach(r=>{a.push(e[r])})}),p.value=x.query.selected?JSON.parse(x.query.selected):[],O.value=[...new Set(a.filter(Boolean).join().split(","))]},Y=S(()=>j.value?O.value:O.value.slice(0,8));function z(a){C.push({path:`company/${a}`,query:{selectedindustry:v.value,MultipleTypeArray:JSON.stringify(i.value),selected:JSON.stringify(p.value)}})}return se(()=>{if(x.query.selectedindustry!=="全部"&&x.query.selectedindustry){_(x.query.selectedindustry);return}_()}),(a,e)=>{const r=le("RouterLink");return n(),o(b,null,[M(w(ie),{active:$.value,"onUpdate:active":e[0]||(e[0]=s=>$.value=s)},{default:V(()=>e[18]||(e[18]=[t("div",{class:"loader"},null,-1)])),_:1},8,["active"]),t("nav",de,[t("div",ce,[R.value?(n(),o("div",be,[t("button",{class:"btn",type:"button",onClick:I},e[21]||(e[21]=[t("span",{class:"material-symbols-outlined"}," chevron_backward ",-1)])),ne(t("input",{onInput:W,ref_key:"input",ref:N,type:"text",class:"form-control border-0",placeholder:"搜尋","onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s)},null,544),[[oe,g.value]]),g.value?(n(),o("button",{key:0,class:"btn",type:"button",onClick:e[2]||(e[2]=s=>g.value="")},e[22]||(e[22]=[t("span",{class:"material-symbols-outlined"}," close ",-1)]))):y("",!0)])):(n(),o("div",ve,[t("div",null,[M(r,{class:"navbar-brand",to:"/"},{default:V(()=>e[19]||(e[19]=[t("img",{src:ue,alt:"LOGO"},null,-1)])),_:1})]),t("div",{class:"ms-auto"},[t("button",{class:"btn",type:"button",onClick:Z},e[20]||(e[20]=[t("span",{class:"material-symbols-outlined"}," search ",-1)]))])]))])]),t("div",fe,[t("div",pe,[t("div",ye,[e[23]||(e[23]=t("h3",{class:"fs-6 text-black text-opacity-50"},"廠商行業",-1)),t("ul",ke,[t("li",null,[t("button",{type:"button",class:f(["btn btn-custom border-0",{active:v.value==="全部"}]),onClick:e[3]||(e[3]=()=>{w(C).push({query:{}}),_("全部")})}," 全部 ",2)]),t("li",null,[t("button",{type:"button",class:f(["btn btn-custom border-0",{active:v.value==="火鍋"}]),onClick:e[4]||(e[4]=()=>{w(C).push({query:{}}),_("火鍋")})}," 火鍋 ",2)]),t("li",null,[t("button",{type:"button",class:f(["btn btn-custom border-0",{active:v.value==="飲料"}]),onClick:e[5]||(e[5]=()=>{w(C).push({query:{}}),_("飲料")})}," 飲料 ",2)]),t("li",null,[t("button",{type:"button",class:f(["btn btn-custom border-0",{active:v.value==="剉冰"}]),onClick:e[6]||(e[6]=()=>{w(C).push({query:{}}),_("剉冰")})}," 剉冰 ",2)]),t("li",null,[t("button",{type:"button",class:f(["btn btn-custom border-0",{active:v.value==="燒烤"}]),onClick:e[7]||(e[7]=()=>{const s=w(x).path;w(C).push(s),_("燒烤")})}," 燒烤 ",2)]),t("li",null,[t("button",{type:"button",class:f(["btn btn-custom border-0",{active:v.value==="烘焙"}]),onClick:e[8]||(e[8]=()=>{w(C).push({query:{}}),_("烘焙")})}," 烘焙 ",2)])])]),v.value!=="全部"?(n(),o("div",he,[t("div",ge,[e[24]||(e[24]=t("h3",{class:"fs-6 text-black text-opacity-50"},"原物料種類",-1)),t("ul",me,[t("li",xe,[t("a",{href:"#",class:f(["btn btn-custom border-0",{active:!i.value.length}]),onClick:e[9]||(e[9]=()=>{i.value=[],p.value=[]})},"全部",2)]),(n(!0),o(b,null,m(q.value,s=>(n(),o("li",{class:"me-2",key:s},[t("a",{href:"#",class:f(["btn btn-custom border-0",{active:i.value.includes(s)}]),onClick:k(l=>P(s),["prevent"])},h(s),11,_e)]))),128))])])])):y("",!0),i.value.length?(n(),o("div",we,[t("div",Ce,[e[25]||(e[25]=t("h3",{class:"fs-6 text-black text-opacity-50"},"類別細項",-1)),t("ul",Te,[t("li",$e,[t("a",{href:"#",class:f(["btn btn-custom border-0",{active:!p.value.length}]),onClick:e[10]||(e[10]=s=>p.value=[])},"全部",2)]),(n(!0),o(b,null,m(Y.value,s=>(n(),o("li",{key:s},[t("a",{href:"#",class:f(["btn btn-custom border-0",{active:p.value.includes(s)}]),onClick:k(l=>X(s),["prevent"])},h(s),11,Oe)]))),128)),t("li",null,[O.value.length>8?(n(),o("a",{key:0,href:"#",class:"btn text-primary border-0",onClick:e[11]||(e[11]=k(s=>j.value=!j.value,["prevent"]))},h(j.value?"收起－":"更多"),1)):y("",!0)])])])])):y("",!0)]),v.value!=="全部"?(n(),o("h3",je,"廠商")):y("",!0),g.value.trim()?(n(),o("div",{key:1,class:"row gx-2",ref_key:"scrollbox",ref:A},[t("h4",null,[e[26]||(e[26]=J(" 以下為 ")),t("span",qe,h(g.value),1),e[27]||(e[27]=J(" 的搜尋結果 ")),t("button",{type:"button",class:"btn btn-sm btn-danger",onClick:I},"Ｘ")]),D.value.length?y("",!0):(n(),o("div",Ae,e[28]||(e[28]=[t("img",{src:ae,alt:"無資料"},null,-1)]))),(n(!0),o(b,null,m(D.value,s=>(n(),o("div",{class:"col-6 col-lg-3 mb-3",key:s.編號},[M(r,{target:"_blank",to:`/company/${s.編號}`},{default:V(()=>[t("div",Re,[t("div",Se,[t("div",null,[t("a",{href:s.網址,target:"_blank",class:"fs-6"},h(s.廠商),9,Me)]),t("div",null,[u.value?(n(),o("i",{key:0,class:"bi bi-heart-fill fs-4 link-info",onClick:e[12]||(e[12]=k(l=>u.value=!u.value,["prevent"]))})):(n(),o("i",{key:1,class:"bi bi-heart fs-4 link-gray",onClick:e[13]||(e[13]=k(l=>u.value=!u.value,["prevent"]))}))])]),t("div",Ve,[(n(!0),o(b,null,m(Object.keys(s),l=>(n(),o(b,{key:l},[s[l]&&l!=="編號"&&l!=="廠商"&&l!=="網址"&&l!=="類別"?(n(),o("div",Le,[t("span",{class:f(["badge rounded-pill text-bg-secondary fw-normal fs-6 me-2 mb-2",[{"bg-warning":i.value.includes(l)},{"text-dark":i.value.includes(l)}]])},h(l),3)])):y("",!0)],64))),128))])])]),_:2},1032,["to"])]))),128))],512)):v.value!=="全部"?(n(),o("div",Be,[(n(!0),o(b,null,m(U.value,s=>(n(),o("div",{class:"col-6 col-lg-3 mb-3",key:s.編號},[t("a",{href:"#",onClick:k(l=>z(s.編號),["prevent"])},[t("div",Ne,[t("div",De,[t("div",null,[t("a",{href:s.網址,target:"_blank",class:"fs-6"},h(s.廠商),9,Ee)]),t("div",null,[u.value?(n(),o("i",{key:0,class:"bi bi-heart-fill fs-4 link-info",onClick:e[14]||(e[14]=k(l=>u.value=!u.value,["prevent"]))})):(n(),o("i",{key:1,class:"bi bi-heart fs-4 link-gray",onClick:e[15]||(e[15]=k(l=>u.value=!u.value,["prevent"]))}))])]),t("div",ze,[(n(!0),o(b,null,m(Object.keys(s),l=>(n(),o(b,{key:l},[s[l]&&l!=="編號"&&l!=="廠商"&&l!=="網址"?(n(),o("div",Je,[t("span",{class:f(["badge rounded-pill text-bg-secondary fw-normal fs-6 me-2 mb-2",[{"bg-warning":i.value.includes(l)},{"text-dark":i.value.includes(l)}]])},h(l),3)])):y("",!0)],64))),128))])])],8,Ie)]))),128))])):y("",!0),v.value==="全部"&&!g.value?(n(!0),o(b,{key:3},m(B.value,s=>(n(),o("div",{class:"mb-4",key:s.編號},[t("h3",Fe,h(Object.keys(s).toString()),1),t("div",He,[(n(!0),o(b,null,m(s[Object.keys(s)],l=>(n(),o("div",{class:"col-6 col-lg-3 mb-3",key:l.編號},[t("a",{href:"#",onClick:k(d=>z(l.編號),["prevent"])},[t("div",Qe,[t("div",Ue,[t("div",null,[t("a",{href:l.網址,target:"_blank",class:"fs-6"},h(l.廠商),9,We)]),t("div",null,[u.value?(n(),o("i",{key:0,class:"bi bi-heart-fill fs-4 link-info",onClick:e[16]||(e[16]=k(d=>u.value=!u.value,["prevent"]))})):(n(),o("i",{key:1,class:"bi bi-heart fs-4 link-gray",onClick:e[17]||(e[17]=k(d=>u.value=!u.value,["prevent"]))}))])]),t("div",Ze,[(n(!0),o(b,null,m(Object.keys(l),d=>(n(),o(b,{key:d},[l[d]&&!["編號","廠商","網址","類別","公司簡介"].includes(d)?(n(),o("div",Pe,[t("span",Xe,h(d),1)])):y("",!0)],64))),128))])])],8,Ge)]))),128))])]))),128)):y("",!0)])],64)}}};export{tt as default};
