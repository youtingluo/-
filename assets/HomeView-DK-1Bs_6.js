import{u as ee,a as te,r as c,c as S,o as se,b as le,d as n,e as o,f as E,w as z,g as w,h as t,i as f,j as ne,v as oe,k,n as p,F as b,l as x,t as h,m as J,p as F}from"./index-Dp3pfA5V.js";import{_ as re,a as ae,b as ie,L as ue}from"./index-DY-RKkbs.js";const de={class:"navbar bg-white shadow-sm mb-4 sticky-top"},ce={class:"container"},ve={key:0,class:"d-flex w-100"},be={key:1,class:"input-group"},fe={class:"container"},pe={class:"border-bottom border-2 mb-4"},ye={class:"mb-4"},ke={class:"d-flex fs-3 mb-3 flex-wrap"},he={key:0,class:"row gx-2 mb-4"},ge={class:"col"},me={class:"d-flex fs-3 flex-wrap"},xe={class:"me-2"},_e=["onClick"],we={key:1,class:"row mb-4"},Ce={class:"col"},$e={class:"d-flex flex-wrap fs-3"},Te={class:"me-2"},Oe=["onClick"],je={key:0,class:"fs-6 text-black text-opacity-50"},qe={class:"text-danger"},Ae={key:0,class:"text-center py-5"},Re={class:"p-3 rounded-5 h-100 shadow-sm bg-white"},Se={class:"d-flex justify-content-between mb-3"},Me=["href"],Ve={class:"d-flex flex-wrap"},Le={key:0},Be={key:2,class:"row gx-2"},Ie=["onClick"],Ne={class:"p-3 rounded-5 h-100 shadow-sm bg-white"},De={class:"d-flex justify-content-between mb-3"},Ee=["href"],ze={class:"d-flex flex-wrap"},Je={key:0},Fe={class:"fs-6 text-black text-opacity-50"},He={class:"row gx-2"},Ge=["onClick"],Qe={class:"p-3 rounded-5 h-100 shadow-sm bg-white"},Ue={class:"d-flex justify-content-between mb-3"},We=["href"],Ze={class:"d-flex flex-wrap"},Pe={key:0},Xe={class:"badge rounded-pill text-bg-secondary fw-normal fs-6 me-2 mb-2"},tt={__name:"HomeView",setup(Ye){const C=ee(),_=te(),H="AIzaSyBD47B-9Q5OFIvDYEZXmv7WrcVb-7eoT_A",G="1z-irp4iTLpHxl64hk6cGQ-94d4x5cTbZwHlV3eRw8fM",v=c(""),T=c(!1);async function g(r="全部"){T.value=!0,v.value=r;const e=`${r}!A1:AA70`,i=`https://sheets.googleapis.com/v4/spreadsheets/${G}/values/${e}?key=${H}`;try{const s=await ie.get(i);T.value=!1;const l=s.data.values;q.value=l[0].slice(2,-1),$.value=M(l),M($.value),a.value=_.query.MultipleTypeArray?JSON.parse(_.query.MultipleTypeArray):[],N()}catch(s){T.value=!1,console.error("Error fetching values:",s)}}function M(r){const e=r[0],i=[];for(let s=1;s<r.length;s++){const l={};for(let d=0;d<e.length;d++)l[e[d]]=r[s][d];i.push(l)}return v.value==="全部"&&Q($.value),i}const V=c([]);function Q(r){const e=r.reduce((s,l)=>{const d=Object.fromEntries(Object.entries(l).filter(([,K])=>K!==void 0||""));return s[l.類別]||(s[l.類別]=[]),s[l.類別].push(d),s},{}),i=[];for(const s in e)i.push({[s]:e[s]});V.value=i}const $=c([]),q=c([]),y=c([]),u=c(!1),U=S(()=>y.value.length?$.value.filter(r=>{const e=a.value.every(s=>r[s]&&r[s].length>0),i=a.value.some(s=>y.value.every(l=>r[s]&&r[s].includes(l)));return e&&i}):$.value.filter(r=>a.value.every(e=>r[e]))),A=c(null),W=()=>{F(()=>{if(A.value){const e=document.body.getBoundingClientRect().top,s=A.value.getBoundingClientRect().top-e-82;window.scrollTo({top:s,behavior:"smooth"})}})},L=()=>{window.scrollTo(0,0),R.value=!1,m.value=""},R=c(!1),m=c(""),B=c(null),Z=()=>{R.value=!0,F(()=>{B.value.focus()})},I=S(()=>$.value.filter(r=>{const e=new RegExp(m.value.split("").join(".*"),"i");return q.value.some(i=>e.test(r[i]))})),a=c([]),P=r=>{const e=a.value.indexOf(r);e>-1?a.value.splice(e,1):a.value.push(r),N()},X=r=>{const e=y.value.indexOf(r);e>-1?y.value.splice(e,1):y.value.push(r)},O=c([]),j=c(!1),N=()=>{const r=[];$.value.forEach(e=>{a.value.forEach(i=>{r.push(e[i])})}),y.value=_.query.selected?JSON.parse(_.query.selected):[],O.value=[...new Set(r.filter(Boolean).join().split(","))]},Y=S(()=>j.value?O.value:O.value.slice(0,8));function D(r){C.push({path:`company/${r}`,query:{selectedindustry:v.value,MultipleTypeArray:JSON.stringify(a.value),selected:JSON.stringify(y.value)}})}return se(()=>{if(_.query.selectedindustry!=="全部"&&_.query.selectedindustry){g(_.query.selectedindustry);return}g()}),(r,e)=>{const i=le("RouterLink");return n(),o(b,null,[E(w(ue),{active:T.value,"onUpdate:active":e[0]||(e[0]=s=>T.value=s)},{default:z(()=>e[19]||(e[19]=[t("div",{class:"loader"},null,-1)])),_:1},8,["active"]),t("nav",de,[t("div",ce,[R.value?(n(),o("div",be,[t("button",{class:"btn",type:"button",onClick:L},e[22]||(e[22]=[t("span",{class:"material-symbols-outlined"}," chevron_backward ",-1)])),ne(t("input",{onInput:W,ref_key:"input",ref:B,type:"text",class:"form-control border-0",placeholder:"搜尋","onUpdate:modelValue":e[2]||(e[2]=s=>m.value=s)},null,544),[[oe,m.value]]),m.value?(n(),o("button",{key:0,class:"btn",type:"button",onClick:e[3]||(e[3]=s=>m.value="")},e[23]||(e[23]=[t("span",{class:"material-symbols-outlined"}," close ",-1)]))):k("",!0)])):(n(),o("div",ve,[t("div",null,[t("a",{href:"#",class:"navbar-brand",onClick:e[1]||(e[1]=f(s=>g(),["prevent"]))},e[20]||(e[20]=[t("img",{src:re,alt:"LOGO"},null,-1)]))]),t("div",{class:"ms-auto"},[t("button",{class:"btn",type:"button",onClick:Z},e[21]||(e[21]=[t("span",{class:"material-symbols-outlined"}," search ",-1)]))])]))])]),t("div",fe,[t("div",pe,[t("div",ye,[e[24]||(e[24]=t("h3",{class:"fs-6 text-black text-opacity-50"},"廠商行業",-1)),t("ul",ke,[t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:v.value==="全部"}]),onClick:e[4]||(e[4]=()=>{w(C).push({query:{}}),g("全部")})}," 全部 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:v.value==="火鍋"}]),onClick:e[5]||(e[5]=()=>{w(C).push({query:{}}),g("火鍋")})}," 火鍋 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:v.value==="飲料"}]),onClick:e[6]||(e[6]=()=>{w(C).push({query:{}}),g("飲料")})}," 飲料 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:v.value==="剉冰"}]),onClick:e[7]||(e[7]=()=>{w(C).push({query:{}}),g("剉冰")})}," 剉冰 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:v.value==="燒烤"}]),onClick:e[8]||(e[8]=()=>{const s=w(_).path;w(C).push(s),g("燒烤")})}," 燒烤 ",2)]),t("li",null,[t("button",{type:"button",class:p(["btn btn-custom border-0",{active:v.value==="烘焙"}]),onClick:e[9]||(e[9]=()=>{w(C).push({query:{}}),g("烘焙")})}," 烘焙 ",2)])])]),v.value!=="全部"?(n(),o("div",he,[t("div",ge,[e[25]||(e[25]=t("h3",{class:"fs-6 text-black text-opacity-50"},"原物料種類",-1)),t("ul",me,[t("li",xe,[t("a",{href:"#",class:p(["btn btn-custom border-0",{active:!a.value.length}]),onClick:e[10]||(e[10]=()=>{a.value=[],y.value=[]})},"全部",2)]),(n(!0),o(b,null,x(q.value,s=>(n(),o("li",{class:"me-2",key:s},[t("a",{href:"#",class:p(["btn btn-custom border-0",{active:a.value.includes(s)}]),onClick:f(l=>P(s),["prevent"])},h(s),11,_e)]))),128))])])])):k("",!0),a.value.length?(n(),o("div",we,[t("div",Ce,[e[26]||(e[26]=t("h3",{class:"fs-6 text-black text-opacity-50"},"類別細項",-1)),t("ul",$e,[t("li",Te,[t("a",{href:"#",class:p(["btn btn-custom border-0",{active:!y.value.length}]),onClick:e[11]||(e[11]=s=>y.value=[])},"全部",2)]),(n(!0),o(b,null,x(Y.value,s=>(n(),o("li",{key:s},[t("a",{href:"#",class:p(["btn btn-custom border-0",{active:y.value.includes(s)}]),onClick:f(l=>X(s),["prevent"])},h(s),11,Oe)]))),128)),t("li",null,[O.value.length>8?(n(),o("a",{key:0,href:"#",class:"btn text-primary border-0",onClick:e[12]||(e[12]=f(s=>j.value=!j.value,["prevent"]))},h(j.value?"收起－":"更多"),1)):k("",!0)])])])])):k("",!0)]),v.value!=="全部"?(n(),o("h3",je,"廠商")):k("",!0),m.value.trim()?(n(),o("div",{key:1,class:"row gx-2",ref_key:"scrollbox",ref:A},[t("h4",null,[e[27]||(e[27]=J(" 以下為 ")),t("span",qe,h(m.value),1),e[28]||(e[28]=J(" 的搜尋結果 ")),t("button",{type:"button",class:"btn btn-sm btn-danger",onClick:L},"Ｘ")]),I.value.length?k("",!0):(n(),o("div",Ae,e[29]||(e[29]=[t("img",{src:ae,alt:"無資料"},null,-1)]))),(n(!0),o(b,null,x(I.value,s=>(n(),o("div",{class:"col-6 col-lg-3 mb-3",key:s.編號},[E(i,{target:"_blank",to:`/company/${s.編號}`},{default:z(()=>[t("div",Re,[t("div",Se,[t("div",null,[t("a",{href:s.網址,target:"_blank",class:"fs-6"},h(s.廠商),9,Me)]),t("div",null,[u.value?(n(),o("i",{key:0,class:"bi bi-heart-fill fs-4 link-info",onClick:e[13]||(e[13]=f(l=>u.value=!u.value,["prevent"]))})):(n(),o("i",{key:1,class:"bi bi-heart fs-4 link-gray",onClick:e[14]||(e[14]=f(l=>u.value=!u.value,["prevent"]))}))])]),t("div",Ve,[(n(!0),o(b,null,x(Object.keys(s),l=>(n(),o(b,{key:l},[s[l]&&l!=="編號"&&l!=="廠商"&&l!=="網址"&&l!=="類別"?(n(),o("div",Le,[t("span",{class:p(["badge rounded-pill text-bg-secondary fw-normal fs-6 me-2 mb-2",[{"bg-warning":a.value.includes(l)},{"text-dark":a.value.includes(l)}]])},h(l),3)])):k("",!0)],64))),128))])])]),_:2},1032,["to"])]))),128))],512)):v.value!=="全部"?(n(),o("div",Be,[(n(!0),o(b,null,x(U.value,s=>(n(),o("div",{class:"col-6 col-lg-3 mb-3",key:s.編號},[t("a",{href:"#",onClick:f(l=>D(s.編號),["prevent"])},[t("div",Ne,[t("div",De,[t("div",null,[t("a",{href:s.網址,target:"_blank",class:"fs-6"},h(s.廠商),9,Ee)]),t("div",null,[u.value?(n(),o("i",{key:0,class:"bi bi-heart-fill fs-4 link-info",onClick:e[15]||(e[15]=f(l=>u.value=!u.value,["prevent"]))})):(n(),o("i",{key:1,class:"bi bi-heart fs-4 link-gray",onClick:e[16]||(e[16]=f(l=>u.value=!u.value,["prevent"]))}))])]),t("div",ze,[(n(!0),o(b,null,x(Object.keys(s),l=>(n(),o(b,{key:l},[s[l]&&l!=="編號"&&l!=="廠商"&&l!=="網址"?(n(),o("div",Je,[t("span",{class:p(["badge rounded-pill text-bg-secondary fw-normal fs-6 me-2 mb-2",[{"bg-warning":a.value.includes(l)},{"text-dark":a.value.includes(l)}]])},h(l),3)])):k("",!0)],64))),128))])])],8,Ie)]))),128))])):k("",!0),v.value==="全部"&&!m.value?(n(!0),o(b,{key:3},x(V.value,s=>(n(),o("div",{class:"mb-4",key:s.編號},[t("h3",Fe,h(Object.keys(s).toString()),1),t("div",He,[(n(!0),o(b,null,x(s[Object.keys(s)],l=>(n(),o("div",{class:"col-6 col-lg-3 mb-3",key:l.編號},[t("a",{href:"#",onClick:f(d=>D(l.編號),["prevent"])},[t("div",Qe,[t("div",Ue,[t("div",null,[t("a",{href:l.網址,target:"_blank",class:"fs-6"},h(l.廠商),9,We)]),t("div",null,[u.value?(n(),o("i",{key:0,class:"bi bi-heart-fill fs-4 link-info",onClick:e[17]||(e[17]=f(d=>u.value=!u.value,["prevent"]))})):(n(),o("i",{key:1,class:"bi bi-heart fs-4 link-gray",onClick:e[18]||(e[18]=f(d=>u.value=!u.value,["prevent"]))}))])]),t("div",Ze,[(n(!0),o(b,null,x(Object.keys(l),d=>(n(),o(b,{key:d},[l[d]&&!["編號","廠商","網址","類別","公司簡介"].includes(d)?(n(),o("div",Pe,[t("span",Xe,h(d),1)])):k("",!0)],64))),128))])])],8,Ge)]))),128))])]))),128)):k("",!0)])],64)}}};export{tt as default};
