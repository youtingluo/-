import{s as N,r as i,b as o,f as s,d as h,e as x,k as u,h as f,v as g,j as m,l as r,t as _,x as T,p as n,y as V,q as U,z as B,A as G}from"./index-Ddh2s6S1.js";const M={class:"container pt-5"},P={class:"row justify-content-center"},$={class:"col-lg-6"},A={class:"nav nav-tabs",ref:"loginTab",role:"tablist"},D={class:"nav-item",role:"presentation"},q={class:"tab-content bg-white p-3 rounded",id:"myTabContent"},z={class:"tab-pane show active"},W={key:0},F={class:"mb-3"},H={class:"d-flex justify-content-between align-items-center"},I=["disabled"],J={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},K={key:0,class:"text-danger mt-2 mb-0"},O={key:1},Q={class:"mb-3"},X={class:"mb-3"},Y={class:"d-flex justify-content-between align-items-center"},Z=["disabled"],ee={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},se={key:0,class:"text-danger my-1"},te=["disabled"],le={key:0,class:"spinner-border spinner-border-sm me-1",role:"status","aria-hidden":"true"},ne={__name:"LoginView",setup(ae){const y=N(),C=V("$toast"),j=V("$swal"),k=U(),v=i(""),p=i(""),c=i(""),t=i(!1),L=i(""),l=i(""),R=async()=>{t.value=!0;try{await y.login(v.value,p.value)&&(C.fire({icon:"success",title:"登入成功"}),k.push("/"))}catch(a){a.code==="auth/invalid-credential"?l.value="帳號或密碼不正確":a.code==="auth/invalid-email"&&(l.value="信箱格式不正確"),t.value=!1}finally{t.value=!1}},b=i(!1),S=()=>{t.value=!0,B(G,c.value).then(()=>{t.value=!1,j.fire({title:"信件已發送",html:`<div class="text-success mt-2 mb-0">
              <p>
                密碼重設信件已發送，請檢查您的信箱。
              </p>
              <p>
                <small class="text-danger">
                  <span class="material-symbols-outlined d-inline-block align-middle">
                info
                </span>
                  請注意，假如未使用此信箱註冊過，並不會收到重設信件！
                </small>
              </p>
              </div>`}),b.value=!1}).catch(a=>{t.value=!1,l.value=a.message,L.value=""})},E=async()=>{t.value=!0,l.value="";try{await y.loginWithGoogle(),k.push("/")}catch(a){l.value=a.message}finally{t.value=!1}};return(a,e)=>{const w=T("RouterLink");return n(),o("div",M,[s("div",P,[s("div",$,[e[18]||(e[18]=s("h1",{class:"mb-3 text-center"},"登入",-1)),s("ul",A,[e[6]||(e[6]=s("li",{class:"nav-item me-auto",role:"presentation"},[s("div",{class:"nav-link active"},"登入")],-1)),s("li",D,[h(w,{class:"nav-link text-dark fs-6",to:"/"},{default:x(()=>e[5]||(e[5]=[s("span",{class:"material-symbols-outlined d-inline-block align-bottom"}," home ",-1),r("回首頁")])),_:1})])],512),s("div",q,[s("div",z,[b.value?(n(),o("div",W,[s("form",{onSubmit:u(S,["prevent"])},[s("div",F,[e[7]||(e[7]=s("label",{for:"reset-password",class:"form-label"},"信箱",-1)),f(s("input",{type:"email",class:"form-control",id:"reset-password",placeholder:"請輸入註冊時信箱","onUpdate:modelValue":e[0]||(e[0]=d=>c.value=d)},null,512),[[g,c.value]])]),s("div",H,[s("button",{type:"submit",class:"btn btn-primary flex-grow-1 me-2",disabled:t.value||!c.value},[t.value?(n(),o("span",J)):m("",!0),e[8]||(e[8]=r("寄送信件 "))],8,I),s("a",{href:"#",class:"link-primary",onClick:e[1]||(e[1]=u(d=>b.value=!1,["prevent"]))},"返回登入")])],32),l.value?(n(),o("p",K,_(l.value),1)):m("",!0)])):(n(),o("div",O,[s("form",{onSubmit:u(R,["prevent"])},[s("div",Q,[e[9]||(e[9]=s("label",{for:"login-email",class:"form-label"},"信箱",-1)),f(s("input",{type:"email",class:"form-control",id:"login-email",placeholder:"請輸入信箱","onUpdate:modelValue":e[2]||(e[2]=d=>v.value=d)},null,512),[[g,v.value]])]),s("div",X,[e[10]||(e[10]=s("label",{for:"password",class:"form-label"},"密碼",-1)),f(s("input",{type:"password",class:"form-control",id:"password",placeholder:"請輸入密碼","onUpdate:modelValue":e[3]||(e[3]=d=>p.value=d)},null,512),[[g,p.value]])]),s("div",Y,[s("button",{type:"submit",class:"btn btn-primary flex-grow-1 text-white me-1",disabled:t.value||!v.value||!p.value},[t.value?(n(),o("span",ee)):m("",!0),e[11]||(e[11]=r("登入 "))],8,Z),s("div",null,[h(w,{to:"signup",class:"btn btn-outline-dark"},{default:x(()=>e[12]||(e[12]=[r("前往註冊")])),_:1})])])],32),l.value?(n(),o("p",se,[e[13]||(e[13]=s("span",{class:"material-symbols-outlined d-inline-block align-middle"}," cancel ",-1)),r(" "+_(l.value),1)])):m("",!0),e[17]||(e[17]=s("hr",null,null,-1)),s("button",{onClick:u(E,["prevent"]),class:"btn btn-outline-danger mb-2 w-100",disabled:t.value},[t.value?(n(),o("span",le)):m("",!0),e[14]||(e[14]=s("i",{class:"bi bi-google me-2"},null,-1)),e[15]||(e[15]=r("用 Google 帳號登入 "))],8,te),s("a",{href:"#",class:"link-primary text-end",onClick:e[4]||(e[4]=u(()=>{b.value=!0,l.value=""},["prevent"]))},e[16]||(e[16]=[s("span",{class:"material-symbols-outlined d-inline-block align-middle fs-6"}," help ",-1),r("忘記密碼")]))]))])])])])])}}};export{ne as default};
